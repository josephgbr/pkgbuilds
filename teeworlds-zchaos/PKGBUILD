# Maintainer: josephgbr <rafael.f.f1@gmail.com>

# Note: more server stuff at:
# https://www.teeworlds.com/?page=docs&wiki=ServerSettings

pkgname=teeworlds-zchaos
pkgver=1.03.1
pkgrel=1
pkgdesc="A customized server with bots/zombies + maps"
arch=('x86_64' 'i686')
url="https://www.teeworlds.com/forum/viewtopic.php?id=9682"
license=('custom') # free/not opensource
if [[ $CARCH == i686 ]]; then
    depends=(teeworlds)
elif [[ $CARCH == x86_64 ]]; then
    depends=(teeworlds lib32-gcc-libs)
fi
install=$pkgname.install
source=("zChaos_lnx86_$pkgver.zip::http://goo.gl/ScLLL"
         zchaos-srv.cfg moonlight.map zChaos1.map ztf5.map)
md5sums=('ddfbb2f2596226eed783290c1c77d101'
         '20f2dd098460eb3235e3c516e62450fa'
         '45f8333b7c14cd5e562225424fa43e28'
         '350fbdfb64459e00d475a8efeb6ad3ab'
         '8cc23398780bd1ed64d9fadc5c2667e8')

package() {
  install -dm755 "$pkgdir"/usr/bin/
  install -dm755 "$pkgdir"/usr/share/teeworlds/data/maps
  # server binary
  install -m755 zChaos_lnx86_1.03.1 "$pkgdir"/usr/bin/teeworlds-zchaos_srv
  # maps
  install -m644 moonlight.map "$pkgdir"/usr/share/teeworlds/data/maps/
  install -m644 zChaos1.map "$pkgdir"/usr/share/teeworlds/data/maps/
  install -m644 ztf5.map "$pkgdir"/usr/share/teeworlds/data/maps/
  # example of server config
  install -m644 zchaos-srv.cfg "$pkgdir"/usr/share/teeworlds/
}
